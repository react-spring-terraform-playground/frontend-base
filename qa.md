

# 大規模フロントエンドの構成について

## 技術要素前提

- Webアプリ
	- RESTful API利用予定
	- 一般公開無しの為、利用者は多くない

- フロントエンド(React)
	- Next.js
		- SPAのみ。SSRの想定は今のところ無し
	- React v18
	- Typescript v5
- バックエンド(Spring)
  - 業務ごとに分かれるマイクロサービスチックな構成の予定です。
- インフラ
  - AWS予定

## 背景

現在のプロジェクトで以下の要求があるため、それに準じた構成である必要があります。

1. 高いパフォーマンス性
   オフコンからのマイグレーションの為、ミリ秒のパフォーマンスが求めらえる
2. 大量の機能(1000を超える画面数)を作る必要があるため、複数チームで開発を取り組む必要がある
3. エラー発生時から、原因追及・修復・復旧までの許容時間が短い(最大1h程度)

上記の優先度は今の所どれも優劣つけられない状況です。
状況によっては顧客調整をするということにもなるかもしれませんが、可能な限り上記を叶えられるフロントエンド構成にしたいという思いです。

## 質問

想定しているフロントエンドの構成が実現可能か判断したいです。
以下の案①・案②の構成が実現可能か + もし大規模のフロントエンド経験がある方がいればどのような構成にしていたかの知見をいただきたいと思っています。

### 案① 業務単位でモジュールを分割する(モジュール分割)

メリット
- ネットで調べても割とメジャーな方針に見えるため、知見がありそう。容易。
- 1つのアプリのみのため、デプロイ方針もわかりやすい

デメリット
- build時間が1000画面以上だとどれくらいかかるか想定できない
- モジュール別で分かれても、同じリポジトリを複数チームで開発することになる？
　コンフリクトが大変そう。

### 案② 業務単位でアプリケーションごと分割する(マイクロフロントエンドに近い)

メリット
- アプリごとに分かれるためチーム開発が容易に進められる
- buildがアプリ別に実施できるため短時間でできるのでは？
- 1つの業務でエラーが発生しても全体のアプリ利用に影響が出ない

デメリット
- パス別にアプリが分かれるということのため、パスが別のアプリに向いた際に全体が再描画されるのでは？
　→ SPAを採用している意味が無い
- 認証、メニュー画面など、共通処理・部品の切り出し管理が大変。
　→ 共通機能・部品はパッケージング化する？
- 共通基盤部品のライフサイクルを考える必要がある

## 個人的な今の思想

案①の方が良いかなと思っています。
案①のbuild時間を短縮する事より、案②の共通機能の切り出しの方が難易度が高く手間がかかるのかなと思っています。
